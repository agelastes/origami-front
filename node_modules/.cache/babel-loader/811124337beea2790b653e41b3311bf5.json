{"ast":null,"code":"import _classCallCheck from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/agelastes/Code/blog-of-origami/src/components/Autorization/Autorization.js\";\nimport React, { Component } from 'react';\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport { loginTrue } from \"../../ac/loginChange\";\nimport { Link } from \"react-router-dom\";\n\nvar Autorization =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Autorization, _Component);\n\n  function Autorization() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Autorization);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Autorization)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      login: \"Логин\",\n      password: \"Пароль\",\n      email: \"Email\",\n      Message: \"\"\n    };\n\n    _this.addNewUser = function () {\n      var token = \"\";\n      axios.post('http://localhost:5002/api/auth/register', {\n        login: _this.state.login,\n        password: _this.state.password,\n        email: _this.state.email\n      }).then(function (response) {\n        _this.setState({\n          Message: \"Вы были успешно зарегистрированы\"\n        });\n\n        axios.post('http://localhost:5002/api/auth/login', {\n          login: _this.state.login,\n          password: _this.state.password\n        }).then(function (response) {\n          return token = response.data.token;\n        });\n\n        _this.props.loginTrue({\n          login: _this.state.login,\n          token: token,\n          password: _this.state.password,\n          role: response.data.role\n        });\n\n        alert(_this.state.Message);\n      }).catch(function () {\n        _this.setState({\n          Message: \"email занят, попробуйте ввести другой\"\n        });\n\n        alert(_this.state.Message);\n      });\n    };\n\n    _this.changeLogin = function (e) {\n      _this.setState({\n        login: e.target.value\n      });\n    };\n\n    _this.changePassword = function (e) {\n      _this.setState({\n        password: e.target.value\n      });\n    };\n\n    _this.changeEmail = function (e) {\n      _this.setState({\n        email: e.target.value\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Autorization, [{\n    key: \"render\",\n    value: function render() {\n      if (this.props.isLogin) return React.createElement(\"div\", {\n        className: \"sub-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: '/profile',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, \"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C\"));\n      return React.createElement(\"div\", {\n        className: \"sub-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        onChange: this.changeLogin,\n        placeholder: this.state.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        onChange: this.changePassword,\n        placeholder: this.state.password,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        onChange: this.changeEmail,\n        placeholder: this.state.email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.addNewUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"), React.createElement(Link, {\n        to: '/login',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\"));\n    }\n  }]);\n\n  return Autorization;\n}(Component);\n\nvar mapDispatchToProps = {\n  loginTrue: loginTrue\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isLogin: state.isLogin.status\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Autorization);","map":{"version":3,"sources":["/Users/agelastes/Code/blog-of-origami/src/components/Autorization/Autorization.js"],"names":["React","Component","axios","connect","loginTrue","Link","Autorization","state","login","password","email","Message","addNewUser","token","post","then","response","setState","data","props","role","alert","catch","changeLogin","e","target","value","changePassword","changeEmail","isLogin","mapDispatchToProps","mapStateToProps","status"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport {loginTrue} from \"../../ac/loginChange\";\nimport { Link } from \"react-router-dom\";\n\nclass Autorization extends Component {\n\n    state = {\n      login: \"Логин\",\n      password: \"Пароль\",\n      email: \"Email\",\n      Message: \"\"\n    };\n\n    addNewUser = () => {\n        let token = \"\";\n        axios.post(\n            'http://localhost:5002/api/auth/register', {\n                login: this.state.login,\n                password: this.state.password,\n                email: this.state.email\n            }\n        ).then(\n            (response)  => {\n                this.setState({Message: \"Вы были успешно зарегистрированы\"});\n                axios.post(\n                    'http://localhost:5002/api/auth/login', {\n                        login: this.state.login,\n                        password: this.state.password,\n                    }\n                ).then((response) => (token = response.data.token));\n                this.props.loginTrue({login: this.state.login, token: token, password: this.state.password, role: response.data.role});\n                alert(this.state.Message);\n            }).catch(\n            () => {\n                this.setState({Message: \"email занят, попробуйте ввести другой\"});\n                alert(this.state.Message);\n                }\n                )\n    };\n\n    changeLogin = (e) => {\n        this.setState({login: e.target.value})\n    };\n\n    changePassword = (e) => {\n        this.setState({password: e.target.value})\n    };\n\n    changeEmail = (e) => {\n        this.setState({email: e.target.value})\n    };\n\n    render() {\n\n        if (this.props.isLogin) return <div className=\"sub-container\"><Link to = {'/profile'}>Продолжить</Link></div>;\n\n        return (\n            <div className=\"sub-container\">\n                <input onChange={this.changeLogin} placeholder={this.state.login} />\n                <input onChange={this.changePassword} placeholder={this.state.password} />\n                <input onChange={this.changeEmail} placeholder={this.state.email} />\n                <button onClick={this.addNewUser}>Зарегистрироваться</button>\n                <Link to={'/login'}>Войти</Link>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = {\n  loginTrue: loginTrue\n};\n\nconst mapStateToProps = (state) => ({\n  isLogin: state.isLogin.status\n});\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Autorization);"]},"metadata":{},"sourceType":"module"}