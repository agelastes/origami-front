{"ast":null,"code":"import _classCallCheck from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/agelastes/Code/blog-of-origami/src/components/SidebarContainer/Sidebar/Sidebar.js\";\nimport React, { Component } from 'react';\nimport \"./Sidebar.css\";\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport { filterOrigamiList } from \"../../../ac/getOrigamiList\";\n\nvar Sidebar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Sidebar, _Component);\n\n  function Sidebar() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Sidebar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Sidebar)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.answer = false;\n    _this.state = {\n      answerName: \"\",\n      surveyPage: {},\n      points: []\n    };\n\n    _this.submitAnswer = function () {\n      _this.answer = true;\n      localStorage.setItem('answer', \"\".concat(_this.state.answerName));\n      console.log(localStorage.getItem('answer'));\n    };\n\n    _this.answerTrue = function (point) {\n      _this.setState({\n        answerName: point.name\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Sidebar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var token = localStorage.getItem('token');\n      axios.post('http://localhost:5002/api/survey/getPageSurvey', {\n        surveyType: 'MainPage'\n      }, {\n        headers: {\n          Authorization: \"\".concat(token)\n        }\n      }).then(function (response) {\n        return _this2.setState({\n          surveyPage: response.data.survey,\n          points: response.data.survey.points\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var items = this.props.item;\n\n      if (this.props.name === \"Опрос\") {\n        if (localStorage.getItem('answer') === '') {\n          items = this.state.points.map(function (point) {\n            return React.createElement(\"div\", {\n              className: \"survey-item\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 36\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 37\n              },\n              __self: this\n            }, React.createElement(\"input\", {\n              onClick: function onClick() {\n                return _this3.answerTrue(point);\n              },\n              type: \"radio\",\n              value: \"point\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 38\n              },\n              __self: this\n            }), React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 39\n              },\n              __self: this\n            }, point.name)));\n          });\n          items.push(React.createElement(\"button\", {\n            onClick: this.submitAnswer,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 43\n            },\n            __self: this\n          }, \"\\u0413\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u0442\\u044C\"));\n        } else {\n          items = React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 46\n            },\n            __self: this\n          }, \"\\u0412\\u044B \\u043F\\u0440\\u043E\\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u043B\\u0438 \\u0437\\u0430: \", localStorage.getItem('answer'));\n        }\n      } else {\n        items = items.map(function (item) {\n          return React.createElement(\"button\", {\n            onClick: function onClick() {\n              return _this3.props.filter(item);\n            },\n            className: \"sidebar-button\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 51\n            },\n            __self: this\n          }, item);\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"sidebar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"sidebar-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, this.props.name), items);\n    }\n  }]);\n\n  return Sidebar;\n}(Component);\n\nvar mapDispatchToProps = {\n  filter: filterOrigamiList\n};\nexport default connect(null, mapDispatchToProps)(Sidebar);","map":{"version":3,"sources":["/Users/agelastes/Code/blog-of-origami/src/components/SidebarContainer/Sidebar/Sidebar.js"],"names":["React","Component","axios","connect","filterOrigamiList","Sidebar","answer","state","answerName","surveyPage","points","submitAnswer","localStorage","setItem","console","log","getItem","answerTrue","point","setState","name","token","post","surveyType","headers","Authorization","then","response","data","survey","items","props","item","map","push","filter","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport \"./Sidebar.css\";\nimport axios from \"axios\";\nimport {connect} from \"react-redux\";\nimport {filterOrigamiList} from \"../../../ac/getOrigamiList\";\n\nclass Sidebar extends Component {\n    answer = false;\n    state = {\n        answerName: \"\",\n      surveyPage: {},\n      points: [],\n    };\n\n    submitAnswer = () => {\n        this.answer = true;\n        localStorage.setItem('answer', `${this.state.answerName}`);\n        console.log(localStorage.getItem('answer'));\n    };\n\n    componentDidMount() {\n        const token = localStorage.getItem('token');\n        axios.post('http://localhost:5002/api/survey/getPageSurvey', {surveyType: 'MainPage'} ,{headers: {Authorization: `${token}`}})\n            .then((response) => this.setState({surveyPage: response.data.survey, points: response.data.survey.points}));\n    }\n\n    answerTrue = (point) => {\n        this.setState({answerName: point.name});\n    };\n\n    render() {\n        let items = this.props.item;\n        if (this.props.name === \"Опрос\") {\n            if (localStorage.getItem('answer') === '') {\n                items = this.state.points.map((point) =>\n                    <div className=\"survey-item\">\n                        <div>\n                            <input onClick={() => this.answerTrue(point)} type=\"radio\" value=\"point\"/>\n                            <span>{point.name}</span>\n                        </div>\n                    </div>\n                );\n                items.push(<button onClick={this.submitAnswer}>Голосовать</button>);\n            }\n            else {\n                items = <span>Вы проголосовали за: {localStorage.getItem('answer')}</span>;\n            }}\n\n\n        else {\n            items = items.map((item) => <button onClick={() => this.props.filter(item)} className=\"sidebar-button\">{item}</button>);\n        }\n\n        return (\n            <div className=\"sidebar\">\n                <h3 className=\"sidebar-title\">{this.props.name}</h3>\n                {items}\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = {\n   filter: filterOrigamiList\n};\n\nexport default connect(null, mapDispatchToProps)(Sidebar);\n"]},"metadata":{},"sourceType":"module"}