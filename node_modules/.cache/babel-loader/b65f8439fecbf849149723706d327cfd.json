{"ast":null,"code":"import _classCallCheck from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/agelastes/Code/blog-of-origami/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/agelastes/Code/blog-of-origami/src/components/Autorization/Login.js\";\nimport React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport { loginTrue } from \"../../ac/loginChange\";\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      login: \"Логин\",\n      password: \"Пароль\",\n      Message: \"\"\n    };\n\n    _this.userDataControl = function () {\n      console.log(_this.state.login, _this.state.password);\n      axios.post('http://localhost:5002/api/auth/login', {\n        login: _this.state.login,\n        password: _this.state.password\n      }).then(function (response) {\n        console.log(response);\n\n        _this.setState({\n          Message: \"Вход успешно выполнен\"\n        });\n\n        _this.props.loginCheck({\n          login: _this.state.login,\n          token: response.data.token,\n          password: _this.state.password,\n          role: response.data.role\n        });\n\n        console.log(response.data.role);\n        alert(_this.state.Message);\n      }).catch(function () {\n        _this.setState({\n          Message: \"Вы не зарегистрированы\"\n        });\n\n        alert(_this.state.Message);\n      });\n    };\n\n    _this.changeLogin = function (e) {\n      _this.setState({\n        login: e.target.value\n      });\n    };\n\n    _this.changePassword = function (e) {\n      _this.setState({\n        password: e.target.value\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      if (this.props.isLogin) return React.createElement(\"div\", {\n        className: \"sub-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: '/profile',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C\"));\n      return React.createElement(\"div\", {\n        className: \"sub-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, this.props.login), React.createElement(\"input\", {\n        onChange: this.changeLogin,\n        placeholder: this.state.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        onChange: this.changePassword,\n        placeholder: this.state.password,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.userDataControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\"), React.createElement(Link, {\n        to: '/autorisation',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isLogin: state.isLogin.login\n  };\n};\n\nvar mapDispatchToProps = {\n  loginCheck: loginTrue\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/agelastes/Code/blog-of-origami/src/components/Autorization/Login.js"],"names":["React","Component","Link","connect","axios","loginTrue","Login","state","login","password","Message","userDataControl","console","log","post","then","response","setState","props","loginCheck","token","data","role","alert","catch","changeLogin","e","target","value","changePassword","isLogin","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport {loginTrue} from \"../../ac/loginChange\";\n\nclass Login extends Component {\n\n    state = {\n        login: \"Логин\",\n        password: \"Пароль\",\n        Message: \"\"\n    };\n\n    userDataControl = () => {\n        console.log(this.state.login, this.state.password);\n        axios.post(\n            'http://localhost:5002/api/auth/login', {\n                login: this.state.login,\n                password: this.state.password,\n            }\n        ).then(\n            (response)  => {\n                console.log(response);\n                this.setState({Message: \"Вход успешно выполнен\"});\n                this.props.loginCheck({login: this.state.login, token: response.data.token, password: this.state.password, role: response.data.role});\n                console.log(response.data.role);\n                alert(this.state.Message);\n            }).catch(\n            () => {\n                this.setState({Message: \"Вы не зарегистрированы\"});\n                alert(this.state.Message);\n            }\n        )\n    };\n\n    changeLogin = (e) => {\n        this.setState({login: e.target.value})\n    };\n\n    changePassword = (e) => {\n        this.setState({password: e.target.value})\n    };\n\n    render() {\n\n        if (this.props.isLogin) return <div className=\"sub-container\"><Link to = {'/profile'}>Продолжить</Link></div>;\n\n        return (\n            <div className=\"sub-container\">\n                <h1>{this.props.login}</h1>\n                <input onChange={this.changeLogin} placeholder={this.state.login} />\n                <input onChange={this.changePassword} placeholder={this.state.password} />\n                <button onClick={this.userDataControl}>Войти</button>\n                <Link to={'/autorisation'}>Зарегистрироваться</Link>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    isLogin: state.isLogin.login\n});\n\nconst mapDispatchToProps = {\n    loginCheck: loginTrue\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n\n"]},"metadata":{},"sourceType":"module"}